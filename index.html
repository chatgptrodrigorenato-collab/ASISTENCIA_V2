<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro con ubicación</title>
  <script>
    function registrarUbicacion() {
      if (!navigator.geolocation) {
        alert("Tu navegador no soporta geolocalización.");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          const lat = position.coords.latitude.toFixed(6);
          const lng = position.coords.longitude.toFixed(6);
          const ubicacion = `${lat},${lng}`;

          const dni = prompt("Ingresa tu DNI:");
          const nombre = prompt("Ingresa tu nombre:");
          const apellido = prompt("Ingresa tu apellido:");

          const data = {
            dni,
            nombre,
            apellido,
            ubicacion
          };

          const url = "https://script.google.com/macros/s/AKfycbw-M7advyUj9KkYv1d1BLXTdiq3kg_LwlwseB9mf58jr6BsSXsmbXthwSpwZHaTZdSJ/exec";

          fetch(url, {
            method: "POST",
            body: JSON.stringify(data),
            headers: {
              "Content-Type": "application/json"
            }
          })
          .then(response => response.text())
          .then(result => {
            alert("Registro completado correctamente.");
          })
          .catch(error => {
            alert("Error al registrar ubicación.");
            console.error(error);
          });
        },
        (error) => {
          alert("No se pudo obtener ubicación. Permite el acceso en el navegador.");
          console.error(error);
        }
      );
    }

    window.onload = registrarUbicacion;
  </script>
</head>
<body>
  <h2>Registrando tu asistencia con ubicación...</h2>
</body>
</html>
